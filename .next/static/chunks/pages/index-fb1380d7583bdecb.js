(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1187)}])},1187:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return B}});var t=n(5893),s=n(1799),c=n(9396),a=n(7294),o=(0,a.createContext)();function i(e){var r=e.children,n=e.initialLoggedInUser,s=(0,a.useState)(n),c=s[0],i=s[1];return(0,t.jsx)(o.Provider,{value:{loggedInUser:c,setLoggedInUser:i},children:r})}var l=function(e){return function(r){var n=(0,a.useContext)(o),i=n.loggedInUser,l=n.setLoggedInUser;return(0,t.jsx)(e,(0,c.Z)((0,s.Z)({},r),{loggedInUser:i,setLoggedInUser:l}))}},d=n(9473);var u=l((function(e){var r=e.loggedInUser,n=e.setLoggedInUser,s=function(e){var r=e.loggedInUser,n=e.setLoggedInUser;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"mx-2",children:["Hello ",r]}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:function(){n("")},children:"Log Out"})]})},c=function(e){e.loggedInUser;var r=e.setLoggedInUser;return(0,t.jsx)("div",{children:(0,t.jsx)("button",{className:"btn btn-secondary",onClick:function(e){e.preventDefault();var n=window.prompt("Enter Login Name:","");r(n)},children:"Log In"})})},a=(0,d.v9)((function(e){return e.toolbar.theme})),o="light"===a?"":"bg-opacity-75";return(0,t.jsx)("div",{className:"container bg-".concat(a," text-bg-").concat(a," ").concat(o," p-2"),children:(0,t.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[(0,t.jsx)("div",{children:(0,t.jsx)("img",{src:"/images/subsmatt_logo_".concat(a,"_theme.png"),alt:"Subsmatt Home Page"})}),(0,t.jsx)("div",{className:"my-auto pt-1",children:(0,t.jsx)("h4",{className:"header-title my-auto",children:"Lang Cards"})}),(0,t.jsx)("div",{className:"text-info my-auto",children:r&&r.length>0?(0,t.jsx)(s,{loggedInUser:r,setLoggedInUser:n}):(0,t.jsx)(c,{loggedInUser:r,setLoggedInUser:n})})]})})})),h=(0,a.createContext)();function f(e){var r=e.children,n=(e.startingTheme,(0,a.useState)(!0)),s=n[0],c=n[1],o=(0,a.useState)(""),i=o[0],l=o[1];return(0,t.jsx)(h.Provider,{value:{searchQuery:i,setSearchQuery:l,showDesc:s,setShowDesc:c},children:r})}var m=n(9498),g=(0,m.oM)({name:"toolbar",initialState:{theme:"light"},reducers:{changeTheme:function(e,r){e.theme="dark"===r.payload?"dark":"light"}}}),x=g.actions.changeTheme,p=g.reducer;var v=function(){var e=(0,d.v9)((function(e){return e.toolbar.theme})),r=(0,d.I0)(),n=(0,a.useContext)(h),s=n.searchQuery,c=n.setSearchQuery,o=n.showDesc,i=n.setShowDesc,l="light"===e?"":"bg-gradient";return(0,t.jsx)("div",{className:"container bg-".concat(e," text-bg-").concat(e," ").concat(l," py-3"),children:(0,t.jsxs)("ul",{className:"toolrow d-flex flex-column flex-lg-row justify-content-between p-0 mb-0",children:[(0,t.jsx)("li",{className:"d-flex flex-column flex-md-row align-items-center",children:(0,t.jsxs)("div",{className:"form-check form-switch",children:[(0,t.jsx)("label",{className:"form-check-label",htmlFor:"showDescSwitch",children:"Show Description"}),(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"showDescSwitch",checked:o,onChange:function(e){return i(e.target.checked)}})]})}),(0,t.jsxs)("li",{className:"d-flex flex-column flex-md-row ml-sm-5",children:[(0,t.jsx)("div",{className:"input-group",children:(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Search...",value:s,onChange:function(e){return c(e.target.value)}})}),(0,t.jsx)("div",{className:"input-group-append",children:(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",children:(0,t.jsx)("i",{className:"fa fa-search"})})})]}),(0,t.jsxs)("li",{className:"d-flex flex-column flex-md-row ml-sm-5 align-items-center",children:[(0,t.jsx)("b",{children:"Theme\xa0\xa0"}),(0,t.jsx)("label",{className:"dropdown",children:(0,t.jsxs)("select",{className:"form-control theme",value:e,onChange:function(e){return r(x(e.target.value))},children:[(0,t.jsx)("option",{value:"light",children:"Light"}),(0,t.jsx)("option",{value:"dark",children:"Dark"})]})})]})]})})},j=n(7568),w=n(797),b=n(655),y=n(196),N="loading",C="success",R="failure",I="api/cards";var k=function(){var e=(0,a.useState)([]),r=e[0],n=e[1],t=(0,a.useState)(N),o=t[0],i=t[1],l=(0,a.useState)(""),d=l[0],u=l[1];return(0,a.useEffect)((function(){function e(){return(e=(0,j.Z)((function(){var e,r;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,y.ZP.get(I)];case 1:return e=t.sent(),i(C),n(e.data),[3,3];case 2:return r=t.sent(),i(R),u(r),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{data:r,requestStatus:o,error:d,updateRecord:function(e,t){var s=(0,w.Z)(r),c=r.map((function(r){return r.id===e.id?e:r}));function a(){return(a=(0,j.Z)((function(){var r;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n(c),[4,y.ZP.put("".concat(I,"/").concat(e.id),e)];case 1:return a.sent(),t&&t(),[3,3];case 2:return r=a.sent(),console.log("error thrown inside delayFunciton: ",r),t&&t(),n(s),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){a.apply(this,arguments)}()},insertRecord:function(e,t){var a=(0,w.Z)(r),o=a.reduce((function(e,r){var n=parseInt(r.id);return n>e?n:e}),0)+1,i=[(0,c.Z)((0,s.Z)({},e),{id:o})].concat((0,w.Z)(r));function l(){return(l=(0,j.Z)((function(){var r;return(0,b.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),n(i),[4,y.ZP.post("".concat(I,"/99999"),e)];case 1:return s.sent(),t&&t(),[3,3];case 2:return r=s.sent(),console.log("error thrown inside delayFunciton: ",r),t&&t(),n(a),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){l.apply(this,arguments)}()},deleteRecord:function(e,t){var s=(0,w.Z)(r),c=r.filter((function(r){return r.id!=e.id}));function a(){return(a=(0,j.Z)((function(){var r;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n(c),[4,y.ZP.delete("".concat(I,"/").concat(e.id),e)];case 1:return a.sent(),t&&t(),[3,3];case 2:return r=a.sent(),console.log("error thrown inside delayFunciton: ",r),t&&t(),n(s),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}}},S=n(6457),Z=(0,a.createContext)();function _(e){var r=e.children,n=e.rec,s=e.updateRecord,c=e.insertRecord,a=e.deleteRecord;return(0,t.jsx)(Z.Provider,{value:{rec:n,updateRecord:s,insertRecord:c,deleteRecord:a},children:r})}var U=function(){var e=function(){console.log("In CardFamiliar:doneCallback ".concat((new Date).getMilliseconds())),o(!1)},r=(0,a.useState)(!1),n=r[0],o=r[1],i=(0,a.useContext)(Z),l=i.rec,d=i.updateRecord;return(0,t.jsxs)("div",{className:"oCardFavorite",children:[(0,t.jsx)("span",{children:"Familiar?"}),(0,t.jsx)("i",{className:l.familiar?"fa fa-star pull-right":"fa fa-star-o pull-right",onClick:function(){o(!0),d((0,c.Z)((0,s.Z)({},l),{familiar:!l.familiar}),e)}}),n?(0,t.jsx)("span",{className:"fas fa-circle-notch fa-spin"}):null]})};var L=function(){var e=(0,a.useContext)(Z),r=e.rec,n=e.deleteRecord;return(0,t.jsx)("span",{children:(0,t.jsx)("a",{href:"#",className:"",children:(0,t.jsx)("i",{onClick:function(e){e.preventDefault(),window.confirm("Are you sure you want to delete this record?")&&n(r)},children:"- Delete"})})})},D=n(1438),E=n(2951),P=n(8029),O=n(6567),F=function(e){(0,P.Z)(n,e);var r=(0,O.Z)(n);function n(e){var t;return(0,D.Z)(this,n),(t=r.call(this,e)).state={hasError:!1},t}return(0,E.Z)(n,[{key:"componentDidCatch",value:function(e,r){logErrorToMyService(e,r)}},{key:"render",value:function(){return this.state.hasError?this.props.errorUI?this.props.errorUI:(0,t.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.Component),T=(0,a.memo)((function(e){var r=e.rec,n=e.updateRecord,s=e.insertRecord,c=e.deleteRecord,o=r.id,i=r.word,l=r.type,u=r.desc,f=r.tags,m=(r.hits,r.familiar,(0,d.v9)((function(e){return e.toolbar.theme}))),g="light"===m?"":"bg-gradient",x=(0,a.useContext)(h).showDesc;return console.log("card: ".concat(o," | ").concat(i)),(0,t.jsx)(_,{rec:r,updateRecord:n,insertRecord:s,deleteRecord:c,children:(0,t.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-4 my-4",children:(0,t.jsxs)("div",{className:"card bg-".concat(m," ").concat(g," p-2"),children:[(0,t.jsx)("div",{className:"card-title",children:(0,t.jsx)("h5",{children:i})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("span",{className:"oCardDesc",children:x?u.substr(1,3):""}),(0,t.jsxs)("div",{className:"oCardCat my-1",children:[(0,t.jsx)("b",{children:l})," ",f.toString()]}),(0,t.jsx)(U,{}),(0,t.jsx)(L,{})]})]})},o)})}),Q);function Q(e,r){return e.rec.familiar===r.rec.familiar}var M=function(e){return(0,t.jsx)(F,{errorUI:(0,t.jsx)("div",{children:"Something went wrond in the Card component"}),children:(0,t.jsx)(T,(0,s.Z)({},e))})};var q=l((function(e){var r=e.insertRecord,n=e.loggedInUser;return n&&0!==n.length?(0,t.jsx)("a",{href:"#",className:"",children:(0,t.jsx)("i",{onClick:function(e){e.preventDefault();var n=window.prompt("Enter spanish word:",""),t=window.prompt("Enter description","");n&&t&&r({id:"1110",lang:"es",word:n,desc_lang:"en",desc:t,tags:["food"],type:"noun",hits:0,examples:[],familiar:!1,iknowthis:!1})},children:"+ Add"})}):null}));var A=function(){var e=(0,d.v9)((function(e){return e.toolbar.theme})),r="light"===e?"":"bg-opacity-75",n=(0,a.useContext)(h).searchQuery,s=k(),c=s.data,o=s.requestStatus,i=s.error,l=s.updateRecord,u=s.insertRecord,f=s.deleteRecord;return o===R?(0,t.jsxs)("div",{className:"text-center text-danger my-5",children:["ERROR: ",(0,t.jsxs)("b",{children:["Loading data failed ",i]})]}):(0,t.jsx)("div",{className:"container bg-".concat(e," text-bg-").concat(e," ").concat(r),children:(0,t.jsxs)(S.Z,{type:"media",rows:10,ready:o===C,children:[(0,t.jsx)(q,{insertRecord:u}),(0,t.jsx)("div",{className:"row",children:c.filter((function(e){return Object.hasOwn(e,"word")&&null!==e.word&&Object.hasOwn(e,"desc")&&null!==e.desc?e.word.toLowerCase().includes(n)||e.desc.toLowerCase().includes(n):(console.log("ERROR: malformed data, check that both 'word' and 'desc' properties are defined."),!1)})).map((function(e){return(0,t.jsx)(M,{rec:e,updateRecord:l,insertRecord:u,deleteRecord:f},e.id)}))})]})})};var H=function(){return(0,t.jsxs)(f,{children:[(0,t.jsx)(v,{}),(0,t.jsx)(A,{})]})},X=(0,m.xC)({reducer:{toolbar:p}});var z=function(){return(0,t.jsx)(i,{initialLoggedInUser:"Smith",children:(0,t.jsxs)(d.zt,{store:X,children:[(0,t.jsx)(u,{}),(0,t.jsx)(H,{})]})})};var B=function(){return(0,t.jsx)(z,{})}}},function(e){e.O(0,[774,623,888,179],(function(){return r=5557,e(e.s=r);var r}));var r=e.O();_N_E=r}]);